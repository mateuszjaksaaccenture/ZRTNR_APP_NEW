sap.ui.define(["sap/ui/model/json/JSONModel","sap/m/MessageBox","cre/ret/app/model/Utilities"],function(e,t,a){"use strict";return{validateIBAN:function(e){var t=e.replace(/ /g,"").toUpperCase(),a="",r=true,n="",i="",s,o,l,u,f,g,c,d,p;var S=5;if(t.length<S){return false}s=t.substring(0,2);if(s!=="PL"){s="PL";t=s.concat(t)}g={PL:"\\d{24}"};f=g[s];if(typeof f!=="undefined"){c=new RegExp("^[A-Z]{2}\\d{2}"+f+"$","");if(!c.test(t)){return false}}o=t.substring(4,t.length)+t.substring(0,4);for(d=0;d<o.length;d++){l=o.charAt(d);if(l!=="0"){r=false}if(!r){a+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(l)}}for(p=0;p<a.length;p++){u=a.charAt(p);i=""+n+""+u;n=i%97}return n===1},_validateCombo:function(e){var t=true;for(var a=0;a<e.length;a++){var r=e[a].getCells();for(var n=0;n<r.length;n++){if(r[n].getMetadata().getName()==="sap.m.ComboBox"&&r[n].getEnabled()===true){if(r[n].getSelectedItem()){if(r[n].getSelectedItem().getKey()){r[n].setValueState(sap.ui.core.ValueState.None)}else{r[n].setValueState(sap.ui.core.ValueState.Error);t=false}}else{r[n].setValueState(sap.ui.core.ValueState.Error);t=false}}else if(r[n].getMetadata().getName()==="sap.m.Input"&&r[n].getEnabled()===true){if(r[n].getId().search("addSerNr")>-1){if(!r[n].getValue()){r[n].setValueState(sap.ui.core.ValueState.Error);t=false}else{r[n].setValueState(sap.ui.core.ValueState.None)}}else{var i=parseInt(r[n].getValue(),10),s=parseInt(r[n].getBindingContext().getObject().PoQuan,10);if(i>s){r[n].setValueState(sap.ui.core.ValueState.Error);t=false}else{r[n].setValueState(sap.ui.core.ValueState.None)}}}}}return t},_validateSet:function(e,r,n){var i=n.getModel(),s=n.getResourceBundle(),o=a.prepareParentObject(e,i),l=a.prepareParentObject(r,i),u=[],f;for(var g in l){if(o[g]){if(l[g].Quan!==o[g].Quan){u.push({Material:g,SelectedNo:l[g].Quan,AllNo:o[g].Quan,MaterialName:o[g].ParentName})}}}if(u.length>0){f=a.prepareReturnMessage(u);t.warning(f,{actions:[s.getText("Confirm"),s.getText("Cancel")],onClose:function(e){if(e===s.getText("Confirm")){n._getPmntMethods()}else{return}}});return false}else{n._getPmntMethods();return true}},_validateIfsSet:function(e,a,r){var n=r.getModel(),i=r.getResourceBundle(),s,o,l=0,u=i.getText("WRN_MSG_SET");for(var f=0;f<e.length;f++){s=n.getProperty(e[f].getBindingContextPath());if(s.Serialno){l++;o=s.InvoiceLines}}if(a){for(var g=0;g<a.length;g++){s=a[g];if(s.Serialno){l++;o=s.InvoiceLines}}}if(o!==l&&o>0){u=u+i.getText("WRG_MSG_SET_IFS",[o,l]);t.warning(u,{actions:[i.getText("Confirm"),i.getText("Cancel")],onClose:function(e){if(e===i.getText("Confirm")){r._getPmntMethods()}else{return}}});return false}else{return true}},_checkProductSet:function(e,t,a){for(var r=0;r<e.length;r++){if(e[r].getMetadata().getElementName()!=="sap.m.GroupHeaderListItem"){var n=e[r].getBindingContext().getObject();if(n.ParentMaterial&&n.ParentMaterial===t&&n.RefItmNumber===a){e[r].setSelected(true)}else{continue}}}},_validateMethodPayment:function(e){var t=["noRefName","noRefCity","noRefHouse","noRefStreet","zipCode"],a=true;for(var r=0;r<t.length;r++){var n=e.byId(t[r]).getValue();if(!n){e.byId(t[r]).setValueState(sap.ui.core.ValueState.Error);a=false}else{e.byId(t[r]).setValueState(sap.ui.core.ValueState.None)}}return a},_validatePosition:function(e){if(e.getVisible()){var t=e.getMetadata().getElementName();switch(t){case"sap.m.Input":if(e.getBinding("value").sPath==="Serialno"){e.setValueState(sap.ui.core.ValueState.None);break}if(!e.getValue()){e.setValueState(sap.ui.core.ValueState.Error);return false}else{e.setValueState(sap.ui.core.ValueState.None)}break;case"sap.m.ComboBox":if(!e.getSelectedKey()&&e.getEnabled()===true){e.setValueState(sap.ui.core.ValueState.Error);return false}else{e.setValueState(sap.ui.core.ValueState.None)}break}}return true},_validateCustomerData:function(e,t,a){var r=[];if(!e.Invoice&&t.NoSapInvoice===false){r.push(a.getText("INV_ID"))}if(!e.Name){r.push(a.getText("Name"))}if(!e.PostlCod1||(t.Zlsch==="R"||t.DispMethod==="R")&&e.PostlCod1==="00-000"){r.push(a.getText("PostCodeValidate"))}if(!e.City){r.push(a.getText("CityValidate"))}if(!e.Country){r.push(a.getText("Country"))}if(!e.Iban&&(t.Zlsch==="P"||t.DispMethod==="P")){r.push(a.getText("AccountID"))}else if(e.Iban&&(t.Zlsch==="P"||t.DispMethod==="P")){this.validateIBAN(e.Iban)?"":r.push(a.getText("InvalidAccountID"))}if(t.Zlsch==="R"||t.DispMethod==="R"){if(!e.Street||!e.HouseNo){r.push(a.getText("Street"))}}return r}}});
//# sourceMappingURL=validation.js.map