sap.ui.define(["sap/ui/model/json/JSONModel","sap/m/MessageBox"],function(e,t){"use strict";return{init:function(e){this.i18nBundle=e.getResourceBundle();this._styleClass=e.getOwnerComponent().getContentDensityClass(),this._model=new sap.ui.model.odata.ODataModel(e.getOwnerComponent().getModel().sServiceUrl,false)},creeateObjectViewModel:function(t){return new e({busy:t,delay:0,lineItemsTableHeader:this.i18nBundle.getText("PROD_HEADER"),createEnable:false,enableSubmit:false,enableAccount:false,requiredData:sap.ui.core.ValueState.None,snValueState:sap.ui.core.ValueState.None,returnAmount:"0.00",addReturnAmount:"0.00",possibleReturn:"0.00",dispoItemZlsch:"",zlsch:"",addItems:0,additionalSN:"",enableDispoAccept:false,dispoPrint:false,disposition:false,pmntLevel:"MAIN",dispMethod:"",guid:"",pmntDialogTitle:this.i18nBundle.getText("SelectPmntMeth"),bussinessClient:false})},readPaymentMethods:function(e,t,n){this._model.create("/SalesItemDictionarySet",e,{async:true,success:function(e,n){if(typeof t==="function"){t(e)}},error:function(e){if(typeof n==="function"){n(e)}}})},createReturn:function(e,t,n){this._model.attachEventOnce("requestSent",function(){sap.ui.getCore().getMessageManager().removeAllMessages()});for(var i=0;i<e.DocToItem.length;i++){e.DocToItem[i].PoQuan=e.DocToItem[i].AppQty.toString();e.DocToItem[i].TargetQty=(parseFloat(e.DocToItem[i].TargetQty)-parseFloat(e.DocToItem[i].AppQty)).toString()}this._model.create("/Documents",e,{async:true,success:function(e,n){if(typeof t==="function"){t(n)}},error:function(e){if(typeof n==="function"){n(e)}}})},createDispoPrintEntry:function(e,t,n){this._model.create("/TempPrint",e,{async:true,success:function(e,n){if(typeof t==="function"){t(e,n)}},error:function(e){if(typeof n==="function"){n(e)}}})},printDisposition:function(e,n,i){var a=new sap.ui.model.odata.type.Guid;var s=a.parseValue(e,"string");if(!s){t.warning(this.i18nBundle.getText("UUID_MISSING"),{styleClass:this._styleClass});return}var o="/DispositionPDFSet(Guid=guid'"+s+"')/$value";this._model.read(o,{context:null,urlParameters:null,async:true,success:function(e,t){if(typeof n==="function"){n(t.requestUri)}},error:function(e){if(typeof i==="function"){i(e)}}})},setPaymentMethodForItem:function(e,t){if(e.getProperty("/disposition")){return e.getProperty("/dispoItemZlsch")}else{return e.getProperty("/zlsch")}},lowCashLevelWarning:function(e,n,i,a){var s=this.i18nBundle.getText("RETURN"),o=this.i18nBundle.getText("Confirm");t.warning(e,{styleClass:this._styleClass,actions:[s,o],onClose:function(e){switch(e){case s:if(typeof n==="function"){n()}break;case o:if(typeof i==="function"){i(a)}break}}})},lowCashLevelWarningNoRef:function(e,n,i,a){var s=this.i18nBundle.getText("RETURN"),o=this.i18nBundle.getText("Confirm");t.warning(e,{styleClass:this._styleClass,actions:[s,o],onClose:function(e){switch(e){case s:if(typeof n==="function"){n()}break;case o:if(typeof i==="function"){i(a)}break}}})},noAccountDocWarning:function(e){var n=this.i18nBundle.getText("noAccDoc");t.warning(n,{styleClass:this._styleClass,actions:[t.Action.OK],onClose:function(t){if(typeof e==="function"){e("8")}}})},prepareParentObject:function(e,t){var n,i={};for(var a=0;a<e.length;a++){n=t.getProperty(e[a].getBindingContextPath());if(n.Material){if(n.ParentMaterial===""){if(!i[n.Material]){i[n.Material]={Parent:n.Material,Quan:1,Items:[n.Material],ParentName:n.ShortText}}}else{if(!i[n.ParentMaterial]){i[n.ParentMaterial]={Parent:n.ParentMaterial,Quan:1,Items:[n.Material]}}else{if(!i[n.ParentMaterial].Items.includes(n.Material)){i[n.ParentMaterial].Items.push(n.Material);i[n.ParentMaterial].Quan+=1}}}}}return i},prepareReturnMessage:function(e){var t=this.i18nBundle,n=t.getText("WRN_MSG_SET"),i;for(var a=0;a<e.length;a++){i=e[a];n=n+t.getText("WRN_MSG_SET_POS",[i.MaterialName,i.Material,i.AllNo,i.SelectedNo])}n=n+t.getText("WRN_MSG_SET_VERIF");return n}}});
//# sourceMappingURL=Utilities.js.map