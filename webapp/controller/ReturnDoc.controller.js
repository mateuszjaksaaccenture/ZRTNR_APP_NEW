sap.ui.define(["cre/ret/app/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","cre/ret/app/model/formatter"],function(e,t,n,i){"use strict";return e.extend("cre.ret.app.controller.ReturnDoc",{formatter:i,onInit:function(){var e,n=new t({busy:true,delay:0});this.getRouter().getRoute("return").attachPatternMatched(this._onObjectMatched,this);e=this.getView().getBusyIndicatorDelay();this.setModel(n,"returnView");this.getOwnerComponent().getModel().metadataLoaded().then(function(){n.setProperty("/delay",e)})},onNavBack:function(){var e=n.getInstance().getPreviousHash(),t=sap.ushell.Container.getService("CrossApplicationNavigation");if(e!==undefined||!t.isInitialNavigation()){history.go(-1)}else{this.getRouter().navTo("object",{objectId:this._sInvoice})}},_onObjectMatched:function(e){var t=e.getParameter("arguments").returnDoc;this._sInvoice=e.getParameter("arguments").objectId;this.getModel().metadataLoaded().then(function(){var e=this.getModel().createKey("ReturnDocSet",{SalesDoc:t});this._bindView("/"+e,t)}.bind(this))},_bindView:function(e,t){var n=this.getModel("returnView"),i=this.getModel();this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){i.metadataLoaded().then(function(){n.setProperty("/busy",true)})},dataReceived:function(){n.setProperty("/busy",false)}}})},_onBindingChange:function(){var e=this.getView(),t=this.getModel("returnView"),n=e.getElementBinding();if(!n.getBoundContext()){this.getRouter().getTargets().display("objectNotFound");return}if(sap.ui.getCore().getMessageManager().getMessageModel().getData().length>0){sap.ui.getCore().getMessageManager().removeAllMessages()}t.setProperty("/busy",false)}})});
//# sourceMappingURL=ReturnDoc.controller.js.map